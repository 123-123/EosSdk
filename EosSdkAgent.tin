// Copyright (c) 2013 Arista Networks, Inc.  All rights reserved.
// Arista Networks, Inc. Confidential and Proprietary.

#include <Tac/Tracing.h>

DEFAULT_TRACE_HANDLE( "EosSdk" )

namespace EosSdk {

void
Agent::doInit() {
   TRACE8( __PRETTY_FUNCTION__ );

   Sysdb::MountGroup::Ptr mg = entityManager()->getMountGroup( this );

   mg->doMount( Sysdb::Mount( "interface/status/eth/phy",
                              "Interface::EthPhyIntfStatusDir", "r" ) );

   mg->doClose( false, "", 0 );
}

void
Agent::doMountsComplete( Sysdb::MountStatus mountStatus,
                         Sysdb::EntityManager::Ptr const & em ) {
   TRACE8( __PRETTY_FUNCTION__ );
   assert( mountStatus == Sysdb::mountSuccess() );

   ethPhyIntfStatusDirIs( em->getEntity<Interface::EthPhyIntfStatusDir>(
            "interface/status/eth/phy" ) );

   TRACE0( "Loading " << extraArg()->extraArgs() );
}

}  // namespace EosSdk
